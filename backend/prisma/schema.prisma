// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())

  username        String    @unique
  displayName     String?
  image           String?   @default("https://static.productionready.io/images/smiley-cyrus.jpg")
  Profile         Profile?
  Friends Profile[] @relation("Friends")
  Blocked         Profile[] @relation("Blocked Users")
  //blocked him  
}

model Ranking {
  id      Int      @id @default(autoincrement())
  userId  Int    @unique
  win   Int      @default(0)
  lose  Int      @default(0)
  streak Int     @default(0)
  date    DateTime @default(now())
  Profile Profile?
}

model FriendShip {
  id Int @id @default(autoincrement())
  user1Id Int
  user2Id Int
  status String @default("pending") 
  date DateTime @default(now())
  user1 Profile  @relation(fields: [user1Id], references: [id])
}
model Profile {
  id           Int     @id @default(autoincrement())
  user         User    @relation(fields: [userId], references: [id])
  userId       Int     @unique // generated by the database
  ranking      Ranking @relation(fields: [userId], references: [id])
  Blocked_User User[]  @relation("Blocked Users")
  Status       String  @default("offline")
  Friends User[] @relation("Friends")
  FriendShip FriendShip[]
}
